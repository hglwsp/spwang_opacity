from dreal import *
import numpy as np




x1,x2,v1,v2 = Variables('x1 x2 v1 v2')

u1 = 0.838875340676281*if_then_else((-1.66755935884527*x1 - 2.85595703537888*v1)>0, -1.66755935884527*x1 - 2.85595703537888*v1,0)\
     - 0.45382776011023*if_then_else((-0.689975440867948*x1 - 1.11874080195126*v1)>0,-0.689975440867948*x1 - 1.11874080195126*v1,0) \
     - 1.07520475532921*if_then_else((0.637290386789519*x1 - 1.7138585372264*v1)>0,0.637290386789519*x1 - 1.7138585372264*v1,0) \
     - 0.234162678164485*if_then_else((0.948041321674543*x1 - 0.620608323912916*v1)>0,0.948041321674543*x1 - 0.620608323912916*v1,0) \
     + 0.298528680377519*if_then_else((1.96119968630003*x1 + 3.25603171952557*v1)>0,1.96119968630003*x1 + 3.25603171952557*v1,0) + 0.611208862039691

# u1 = -0.0267910203838016*If(0>(-1.7449792909155*x1 + 0.244690700566132*v1),0,(-1.7449792909155*x1 + 0.244690700566132*v1))\
#      + 0.128135783972414*If(0>(-1.70059792060086*x1 - 0.00946302769687555*v1),0,(-1.70059792060086*x1 - 0.00946302769687555*v1))\
#      + 1.06454315912695*If(0>(-0.959739357368533*x1 - 0.583489976659496*v1),0,(-0.959739357368533*x1 - 0.583489976659496*v1))\
#      + 1.20229020933496*If(0>(1.76465456527242*x1 + 0.691489959089697*v1),0,(1.76465456527242*x1 + 0.691489959089697*v1)) \
#      - 0.225365160299129*If(0>(2.46375825796286*x1 - 1.33889874551037*v1),0,(2.46375825796286*x1 - 1.33889874551037*v1)) - 1.08403314359567

u2 = 0.838875340676281*If((-1.66755935884527*x2 - 2.85595703537888*v2)>0, -1.66755935884527*x2 - 2.85595703537888*v2,0)\
     - 0.45382776011023*If((-0.689975440867948*x2 - 1.11874080195126*v2)>0,-0.689975440867948*x2 - 1.11874080195126*v2,0) \
     - 1.07520475532921*If((0.637290386789519*x2 - 1.7138585372264*v2)>0,0.637290386789519*x2 - 1.7138585372264*v2,0) \
     - 0.234162678164485*If((0.948041321674543*x2 - 0.620608323912916*v2)>0,0.948041321674543*x2 - 0.620608323912916*v2,0) \
     + 0.298528680377519*If((1.96119968630003*x2 + 3.25603171952557*v2)>0,1.96119968630003*x2 + 3.25603171952557*v2,0) + 0.611208862039691
# u2 = -0.0267910203838016*If(0>(-1.7449792909155*x2 + 0.244690700566132*v2),0,(-1.7449792909155*x2 + 0.244690700566132*v2))\
#      + 0.128135783972414*If(0>(-1.70059792060086*x2 - 0.00946302769687555*v2),0,(-1.70059792060086*x2 - 0.00946302769687555*v2))\
#      + 1.06454315912695*If(0>(-0.959739357368533*x2 - 0.583489976659496*v2),0,(-0.959739357368533*x2 - 0.583489976659496*v2))\
#      + 1.20229020933496*If(0>(1.76465456527242*x2 + 0.691489959089697*v2),0,(1.76465456527242*x2 + 0.691489959089697*v2)) \
#      - 0.225365160299129*If(0>(2.46375825796286*x2 - 1.33889874551037*v2),0,(2.46375825796286*x2 - 1.33889874551037*v2)) - 1.08403314359567

f_x1 = x1 + v1 + 0.5 * u1
f_x2 = x2 + v2 + 0.5 * u2
f_v1 = v1 + u1
f_v2 = v2 + u2

B = (x1 + x2)**0.5 + v1 + v2
# B = 0.851133367038013*x1 + 0.770568138078536*x2 - 0.102390937759361*v1 + 0.781650476849698*v2 \
#     - 1.11549495968027*((-1.63563675710314*x1 - 1.26549947514081*x2 + 0.723729191787462*v1 - 1.58880072676123*v2 - 1.48142923448264)\
#     *(-0.408909189275786*x1 - 0.316374868785201*x2 + 0.180932297946865*v1 - 0.397200181690309*v2 - 0.37035730862066) + 0.001)**0.5\
#     + 0.0378998759037575*((-1.03417803142897*x1 - 0.545397595761133*x2 - 0.41663444387159*v1 - 0.0101643130256946*v2 - 0.592674618802592)\
#     *(-0.258544507857243*x1 - 0.136349398940283*x2 - 0.104158610967898*v1 - 0.00254107825642364*v2 - 0.148168654700648) + 0.001)**0.5 \
#     - 1.03037249949867*((-0.635980532373151*x1 - 2.2067962073842*x2 + 0.507576839147329*v1 - 0.969561853336515*v2 - 0.0383541454346758)\
#     *(-0.158995133093288*x1 - 0.55169905184605*x2 + 0.126894209786832*v1 - 0.242390463334129*v2 - 0.00958853635866896) + 0.001)**0.5\
#     + 1.26114517028161*((-0.601520656922413*x1 - 0.760724154442736*x2 + 0.0338372706382763*v1 - 0.426498337750424*v2 + 0.241601411802351)\
#     *(-0.150380164230603*x1 - 0.190181038610684*x2 + 0.00845931765956906*v1 - 0.106624584437606*v2 + 0.0604003529505877) + 0.001)**0.5\
#     + 0.430500652433307*((-0.11347625526882*x1 + 0.27856251285775*x2 + 0.463691391226228*v1 + 1.04134270440067*v2 + 0.770736349057986)\
#     *(-0.0283690638172049*x1 + 0.0696406282144376*x2 + 0.115922847806557*v1 + 0.260335676100167*v2 + 0.192684087264497) + 0.001)**0.5 \
#     + 1.236507824505*((0.00346973251312922*x1 - 0.324375287658602*x2 + 0.235092970573307*v1 - 0.283531929222497*v2 + 0.276000007520076)\
#     *(0.0138789300525169*x1 - 1.29750115063441*x2 + 0.940371882293227*v1 - 1.13412771688999*v2 + 1.1040000300803) + 0.001)**0.5 \
#     - 0.02852975426072*((0.0682973232115083*x1 - 0.278793424482094*x2 + 0.328351485297841*v1 + 0.0839957090851609*v2 - 0.528395974628435)\
#     *(0.273189292846033*x1 - 1.11517369792838*x2 + 1.31340594119136*v1 + 0.335982836340643*v2 - 2.11358389851374) + 0.001)**0.5 \
#     + 0.27362660761028*((0.11778302243984*x1 + 0.357143646111764*x2 - 0.200851810881756*v1 + 0.273196755007003*v2 + 0.0294362670676089)\
#     *(0.471132089759361*x1 + 1.42857458444705*x2 - 0.803407243527023*v1 + 1.09278702002801*v2 + 0.117745068270436) + 0.001)**0.5 \
#     - 0.0976143234959718*((0.1527985694*x1 + 0.207181244497691*x2 - 0.056603747425638*v1 + 0.0402503813547113*v2 + 0.403677305095801)\
#     *(0.611194277599999*x1 + 0.828724977990765*x2 - 0.226414989702552*v1 + 0.161001525418845*v2 + 1.6147092203832) + 0.001)**0.5 \
#     - 0.0146198508559104*((0.163191209373556*x1 + 0.37034027989982*x2 + 0.488188047301022*v1 - 0.181234162313381*v2 - 0.396466782639938)\
#     *(0.652764837494225*x1 + 1.48136111959928*x2 + 1.95275218920409*v1 - 0.724936649253525*v2 - 1.58586713055975) + 0.001)**0.5 \
#     + 1.07333112487977
# B = -0.629544815674142*x1 - 0.479632780424895*x2 - 0.903249387322772*v1 + 0.0803595027030218*v2 \
#     + 0.136938872780314*((-1.86427897845888*x1 - 0.786460996915797*x2 + 0.565161419788387*v1 + 0.606557831742074*v2 -0.162966628451339)\
#     *(-0.466069744614721*x1 - 0.196615249228949*x2 + 0.141290354947097*v1 + 0.151639457935519*v2 - 0.0407416571128347) + 0.001)**0.5 \
#     + 0.267496855745902*((-1.1362978260251*x1 - 0.4615173860595*x2 - 0.999474211394679*v1 + 0.240199689959399*v2 + 0.499325088629691)\
#     *(-0.284074456506276*x1 - 0.115379346514875*x2 - 0.24986855284867*v1 + 0.0600499224898497*v2 + 0.124831272157423) + 0.001)**0.5 \
#     + 1.38533555175405*((-0.968303738778566*x1 - 0.259431104987009*x2 - 0.49392462179232*v1 + 0.397414726670103*v2 + 0.190642732508671)\
#     *(-0.242075934694642*x1 - 0.0648577762467522*x2 - 0.12348115544808*v1 + 0.0993536816675257*v2 + 0.0476606831271677) + 0.001)**0.5 \
#     + 0.144395736126703*((-0.4465656832141*x1 - 1.43536525594612*x2 + 1.41098268808075*v1 + 0.608687363487007*v2 + 0.457273701003258)\
#     *(-0.111641420803525*x1 - 0.358841313986529*x2 + 0.352745672020188*v1 + 0.152171840871752*v2 + 0.114318425250815) + 0.001)**0.5\
#     - 0.423597653197967*((-0.204673260353927*x1 + 0.154531523209747*x2 + 0.242219416274838*v1 - 0.16631298512201*v2 + 0.201355024902625)\
#     *(-0.0511683150884819*x1 + 0.0386328808024367*x2 + 0.0605548540687094*v1 - 0.0415782462805024*v2 + 0.0503387562256561) + 0.001)**0.5 \
#     - 0.524939652582444*((-0.198884448412683*x1 - 0.45029843763096*x2 + 0.220303838017903*v1 + 0.494565396142955*v2 + 0.927112793895716)\
#     *(-0.0497211121031707*x1 - 0.11257460940774*x2 + 0.0550759595044757*v1 + 0.123641349035739*v2 + 0.231778198473929) + 0.001)**0.5 \
#     + 0.270297767618443*((0.0704948199969293*x1 + 0.170203379953378*x2 + 0.0776251173191394*v1 - 0.0554326419887597*v2 - 0.030796579688401)\
#     *(0.281979279987717*x1 + 0.68081351981351*x2 + 0.310500469276558*v1 - 0.221730567955039*v2 - 0.123186318753604) + 0.001)**0.5 \
#     + 0.167386105511178*((0.0729316490319081*x1 - 0.113103856620185*x2 - 0.21161651205881*v1 + 0.203917958922807*v2 - 0.521570641793597)\
#     *(0.291726596127632*x1 - 0.452415426480738*x2 - 0.846466048235238*v1 + 0.815671835691228*v2 - 2.08628256717439) + 0.001)**0.5 \
#     + 0.853608281935995*((0.202326886760052*x1 - 0.133148106239828*x2 - 0.137048263279517*v1 - 0.112251674129085*v2 - 0.0687895115521156)\
#     *(0.809307547040209*x1 - 0.532592424959311*x2 - 0.548193053118068*v1 - 0.449006696516339*v2 - 0.275158046208462) + 0.001)**0.5 \
#     - 0.18691443343743*((0.402478172785641*x1 - 0.0186668284572274*x2 + 0.524401290749656*v1 + 0.172800237987811*v2 + 0.15890794958335)\
#     *(1.60991269114256*x1 - 0.0746673138289096*x2 + 2.09760516299862*v1 + 0.691200951951243*v2 + 0.635631798333398) + 0.001)**0.5 \
#     - 0.0871859306559858


B_f = 0.851133367038013*f_x1 + 0.770568138078536*f_x2 - 0.102390937759361*f_v1 + 0.781650476849698*f_v2 \
    - 1.11549495968027*((-1.63563675710314*f_x1 - 1.26549947514081*f_x2 + 0.723729191787462*f_v1 - 1.58880072676123*f_v2 - 1.48142923448264)\
    *(-0.408909189275786*f_x1 - 0.316374868785201*f_x2 + 0.180932297946865*f_v1 - 0.397200181690309*f_v2 - 0.37035730862066) + 0.001)**0.5\
    + 0.0378998759037575*((-1.03417803142897*f_x1 - 0.545397595761133*f_x2 - 0.41663444387159*f_v1 - 0.0101643130256946*f_v2 - 0.592674618802592)\
    *(-0.258544507857243*f_x1 - 0.136349398940283*f_x2 - 0.104158610967898*f_v1 - 0.00254107825642364*f_v2 - 0.148168654700648) + 0.001)**0.5 \
    - 1.03037249949867*((-0.635980532373151*f_x1 - 2.2067962073842*f_x2 + 0.507576839147329*f_v1 - 0.969561853336515*f_v2 - 0.0383541454346758)\
    *(-0.158995133093288*f_x1 - 0.55169905184605*f_x2 + 0.126894209786832*f_v1 - 0.242390463334129*f_v2 - 0.00958853635866896) + 0.001)**0.5\
    + 1.26114517028161*((-0.601520656922413*f_x1 - 0.760724154442736*f_x2 + 0.0338372706382763*f_v1 - 0.426498337750424*f_v2 + 0.241601411802351)\
    *(-0.150380164230603*f_x1 - 0.190181038610684*f_x2 + 0.00845931765956906*f_v1 - 0.106624584437606*f_v2 + 0.0604003529505877) + 0.001)**0.5\
    + 0.430500652433307*((-0.11347625526882*f_x1 + 0.27856251285775*f_x2 + 0.463691391226228*f_v1 + 1.04134270440067*f_v2 + 0.770736349057986)\
    *(-0.0283690638172049*f_x1 + 0.0696406282144376*f_x2 + 0.115922847806557*f_v1 + 0.260335676100167*f_v2 + 0.192684087264497) + 0.001)**0.5 \
    + 1.236507824505*((0.00346973251312922*f_x1 - 0.324375287658602*f_x2 + 0.235092970573307*f_v1 - 0.283531929222497*f_v2 + 0.276000007520076)\
    *(0.0138789300525169*f_x1 - 1.29750115063441*f_x2 + 0.940371882293227*f_v1 - 1.13412771688999*f_v2 + 1.1040000300803) + 0.001)**0.5 \
    - 0.02852975426072*((0.0682973232115083*f_x1 - 0.278793424482094*f_x2 + 0.328351485297841*f_v1 + 0.0839957090851609*f_v2 - 0.528395974628435)\
    *(0.273189292846033*f_x1 - 1.11517369792838*f_x2 + 1.31340594119136*f_v1 + 0.335982836340643*f_v2 - 2.11358389851374) + 0.001)**0.5 \
    + 0.27362660761028*((0.11778302243984*f_x1 + 0.357143646111764*f_x2 - 0.200851810881756*f_v1 + 0.273196755007003*f_v2 + 0.0294362670676089)\
    *(0.471132089759361*f_x1 + 1.42857458444705*f_x2 - 0.803407243527023*f_v1 + 1.09278702002801*f_v2 + 0.117745068270436) + 0.001)**0.5 \
    - 0.0976143234959718*((0.1527985694*f_x1 + 0.207181244497691*f_x2 - 0.056603747425638*f_v1 + 0.0402503813547113*f_v2 + 0.403677305095801)\
    *(0.611194277599999*f_x1 + 0.828724977990765*f_x2 - 0.226414989702552*f_v1 + 0.161001525418845*f_v2 + 1.6147092203832) + 0.001)**0.5 \
    - 0.0146198508559104*((0.163191209373556*f_x1 + 0.37034027989982*f_x2 + 0.488188047301022*f_v1 - 0.181234162313381*f_v2 - 0.396466782639938)\
    *(0.652764837494225*f_x1 + 1.48136111959928*f_x2 + 1.95275218920409*f_v1 - 0.724936649253525*f_v2 - 1.58586713055975) + 0.001)**0.5 \
    + 1.07333112487977
# B_f = -0.629544815674142*f_x1 - 0.479632780424895*f_x2 - 0.903249387322772*f_v1 + 0.0803595027030218*f_v2 \
#     + 0.136938872780314*((-1.86427897845888*f_x1 - 0.786460996915797*f_x2 + 0.565161419788387*f_v1 + 0.606557831742074*f_v2 -0.162966628451339)\
#     *(-0.466069744614721*f_x1 - 0.196615249228949*f_x2 + 0.141290354947097*f_v1 + 0.151639457935519*f_v2 - 0.0407416571128347) + 0.001)**0.5 \
#     + 0.267496855745902*((-1.1362978260251*f_x1 - 0.4615173860595*f_x2 - 0.999474211394679*f_v1 + 0.240199689959399*f_v2 + 0.499325088629691)\
#     *(-0.284074456506276*f_x1 - 0.115379346514875*f_x2 - 0.24986855284867*f_v1 + 0.0600499224898497*f_v2 + 0.124831272157423) + 0.001)**0.5 \
#     + 1.38533555175405*((-0.968303738778566*f_x1 - 0.259431104987009*f_x2 - 0.49392462179232*f_v1 + 0.397414726670103*f_v2 + 0.190642732508671)\
#     *(-0.242075934694642*f_x1 - 0.0648577762467522*f_x2 - 0.12348115544808*f_v1 + 0.0993536816675257*f_v2 + 0.0476606831271677) + 0.001)**0.5 \
#     + 0.144395736126703*((-0.4465656832141*f_x1 - 1.43536525594612*f_x2 + 1.41098268808075*f_v1 + 0.608687363487007*f_v2 + 0.457273701003258)\
#     *(-0.111641420803525*f_x1 - 0.358841313986529*f_x2 + 0.352745672020188*f_v1 + 0.152171840871752*f_v2 + 0.114318425250815) + 0.001)**0.5\
#     - 0.423597653197967*((-0.204673260353927*f_x1 + 0.154531523209747*f_x2 + 0.242219416274838*f_v1 - 0.16631298512201*v2 + 0.201355024902625)\
#     *(-0.0511683150884819*f_x1 + 0.0386328808024367*f_x2 + 0.0605548540687094*f_v1 - 0.0415782462805024*f_v2 + 0.0503387562256561) + 0.001)**0.5 \
#     - 0.524939652582444*((-0.198884448412683*f_x1 - 0.45029843763096*f_x2 + 0.220303838017903*f_v1 + 0.494565396142955*f_v2 + 0.927112793895716)\
#     *(-0.0497211121031707*f_x1 - 0.11257460940774*f_x2 + 0.0550759595044757*f_v1 + 0.123641349035739*f_v2 + 0.231778198473929) + 0.001)**0.5 \
#     + 0.270297767618443*((0.0704948199969293*f_x1 + 0.170203379953378*f_x2 + 0.0776251173191394*f_v1 - 0.0554326419887597*f_v2 - 0.030796579688401)\
#     *(0.281979279987717*f_x1 + 0.68081351981351*f_x2 + 0.310500469276558*f_v1 - 0.221730567955039*f_v2 - 0.123186318753604) + 0.001)**0.5 \
#     + 0.167386105511178*((0.0729316490319081*f_x1 - 0.113103856620185*f_x2 - 0.21161651205881*f_v1 + 0.203917958922807*f_v2 - 0.521570641793597)\
#     *(0.291726596127632*f_x1 - 0.452415426480738*f_x2 - 0.846466048235238*f_v1 + 0.815671835691228*f_v2 - 2.08628256717439) + 0.001)**0.5 \
#     + 0.853608281935995*((0.202326886760052*f_x1 - 0.133148106239828*f_x2 - 0.137048263279517*f_v1 - 0.112251674129085*f_v2 - 0.0687895115521156)\
#     *(0.809307547040209*f_x1 - 0.532592424959311*f_x2 - 0.548193053118068*f_v1 - 0.449006696516339*f_v2 - 0.275158046208462) + 0.001)**0.5 \
#     - 0.18691443343743*((0.402478172785641*f_x1 - 0.0186668284572274*f_x2 + 0.524401290749656*f_v1 + 0.172800237987811*f_v2 + 0.15890794958335)\
#     *(1.60991269114256*f_x1 - 0.0746673138289096*f_x2 + 2.09760516299862*f_v1 + 0.691200951951243*f_v2 + 0.635631798333398) + 0.001)**0.5 \
#     - 0.0871859306559858

#3 conditions
print("start verify")
#Initial conditions

f_sat = And(0 <= x1, x1 <= 1, 1 <= x2, x2 <= 10,
          v1 == 0, v2 == 0,
          B > 0)
print(CheckSatisfiability(f_sat, 0.001))

print("start verify")
#unsafe condition

f_sat = And(0 <= x1, x1 <= 10, 0 <= x2, x2 <= 10,
          0 <= v1, v1 <= 0.1, 0 <= v2, v2 <= 0.1,
          B < 0.001)
print(CheckSatisfiability(f_sat, 0.001))

print("start verify")
#diff condition
f_sat = And(0 <= x1, x1 <= 10, 0 <= x2, x2 <= 10,
          0 <= v1, v1 <= 0.1, 0 <= v2, v2 <= 0.1,
      0 <= f_x1, f_x1 <= 10, 0 <= f_x2, f_x2 <= 10,
      0 <= f_v1, f_v1 <= 0.1, 0 <= f_v2, f_v2 <= 0.1,
      #-0.05 <= u1, u1 <= 0.05, -0.05 <= u2, u2 <= 0.05,
         B_f - B > 0 )
print(CheckSatisfiability(f_sat, 0.001))

print("success")


